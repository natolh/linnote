{% extends "base.html" %}

{% set title = 'Résultats' %}
{% set active_page = 'épreuves' %}

{% block body %}
    {% include 'workspaces/admin.html' %}
    {{ super() }}
{% endblock %}

{% block content %}
<div class="topping">
    <div>
        <h1>{{ assessment.title }}</h1>
        <p>Créé par <em>{{ assessment.creator|default('un inconnu', True) }}</em>, le <em>{{ assessment.creation_date.strftime('%d/%m/%Y') }}</em></p>
    </div>
    {% include 'assessment/menu.html' %}
</div>

<div role="toolbar">
    <ul>
        <button class='xhr' data-method='post' data-action="{{ url_for('api.grade', identifier=assessment.identifier, grader='top_linear') }}">
            Lisser
        </button>
    </ul>
    <ul>
        <a href="{{ url_for('assessments.report', id=assessment.identifier) }}" target="_blank">
            Rapport
        </a>
    </ul>
</div>

<div role="table" class="flex">
{% for result in assessment.results %}
    <ul role="row">
        <li role="cell">
            <span class="heading">
                Identifiant
            </span>
            {{ result.student.identifier }}
        </li>
        <li role="cell">
            <span class="heading">
                Note brute
            </span>
            {{ result.score|round(assessment.precision) }}
            / {{ result.scale }}
        </li>
        <li role="cell">
            <span class="heading">
                Note ajustée
            </span>
            {{ result.value|round(assessment.precision) }}
            / {{ result.scale }}
        </li>
    </ul>
{% endfor %}
</div>
{% endblock %}
